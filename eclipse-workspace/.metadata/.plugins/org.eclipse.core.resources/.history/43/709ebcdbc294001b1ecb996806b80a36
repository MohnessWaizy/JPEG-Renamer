package Controller;

import static javax.swing.JOptionPane.showMessageDialog;

import java.io.File;
import java.util.List;

import View.ConfimationWindow;

/**
 * @author Mohness Waizy
 *
 */
public class FileRenamer {
	
	private FileTraverser ft;
	private List <File> files;
	private boolean recursive;
	private ConfimationWindow cw;
	private File[] farray;
	private int arrayPointer;
	

	/**
	 * @param recursive
	 * @param path
	 */
	public FileRenamer(boolean recursive, File path) {
		 this.ft  = new FileTraverser("image/jpeg");
		 this.setRecursive(recursive);
		 
		 this.ft.getFiles(path,recursive);
		 this.files = ft.getFileHolder().getFileList();
			
		 if (!this.files.isEmpty()) { 
				this.farray = new File[files.size()];
				files.toArray(farray); // fill the array
		 }
		 this.arrayPointer = 0; 
	}
	
	/**
	 * Renames files farray
	 */
	public void rename () {
		
		// Reaches end of farray
		if(arrayPointer ==  farray.length) {
			showMessageDialog(null, "Done! Files have been renamed");
			return;
		}
		
		// Create new ConfimationWindow object for renaming file on position==arrayPointer in farray
		if (!files.isEmpty()) {
			cw = new ConfimationWindow(farray[arrayPointer],this);
			cw.getFrame().setResizable(false);
			cw.getFrame().setVisible(true);
		}
		else {
			showMessageDialog(null, "No JPEG files could be found..");
		}
	}

	/**
	 * @return ft
	 */
	public FileTraverser getFt() {
		return ft;
	}

	/**
	 * @param ft
	 */
	public void setFt(FileTraverser ft) {
		this.ft = ft;
	}
	
	/**
	 * @return files
	 */
	public List<File> getFiles() {
		return files;
	}

	/**
	 * @param files
	 */
	public void setFiles(List<File> files) {
		this.files = files;
	}
	
	/**
	 * @return recursive
	 */
	public boolean isRecursive() {
		return recursive;
	}

	/**
	 * @param recursive
	 */
	public void setRecursive(boolean recursive) {
		this.recursive = recursive;
	}
	
	/**
	 * @return cw
	 */
	public ConfimationWindow getCw() {
		return cw;
	}

	/**
	 * @param cw
	 */
	public void setCw(ConfimationWindow cw) {
		this.cw = cw;
	}
	
	/**
	 * @return farray
	 */
	public File[] getFarray() {
		return farray;
	}

	/**
	 * @param farray
	 */
	public void setFarray(File[] farray) {
		this.farray = farray;
	}
	
	/**
	 * @return arrayPointer
	 */
	public int getArrayPointer() {
		return this.arrayPointer;
	}
	
	/**
	 * @param value
	 */
	public void setArrayPointer(int value) {
		this.arrayPointer = value;
	}


	
	
}	












